SELECT MOVIE.MID,MNAME,RELEASEDATE,ACTOR FROM MOVIE,MOVIE_ACTOR
WHERE MOVIE.MID=MOVIE_ACTOR.MID;
SELECT MNAME,SHOWID,SHOWTIME,LANGUAGE FROM MOVIE,SHOW WHERE
MOVIE.MID=SHOW.MID;
DECLARE
N1 NUMBER;
N2 NUMBER;
N3 NUMBER;
N4 NUMBER;
N5 NUMBER;
P NUMBER;
TOT NUMBER;
CIDD NUMBER;
CNAMEE VARCHAR(20);
EMAILL VARCHAR(20);
PHONEE NUMBER;
S NUMBER;
CURSOR DISC IS SELECT OFFERID,DNAME,DPERCENT FROM DISCOUNT;
BEGIN
N1:=&MOVIE_ID;
N2:=&DAY_NO;
N3:=&SHOW_ID;
DBMS_OUTPUT.PUT_LINE('AVAILABLE BLOCKS(PRICE) ARE:');
DBMS_OUTPUT.PUT_LINE('GOLD(120) DIAMOND(150) PLATINUM(200)');
S:=&BLOCK;
IF(S = 1) THEN
P:=120;
ELSIF(S = 2) THEN
P:=150;
ELSIF(S = 3) THEN
P:=200;
END IF;
N4:=&NO_OF_SEATS;
AVAILABLE(N2,N3,N1,N4);
FOR REC IN DISC LOOP
DBMS_OUTPUT.PUT_LINE(REC.OFFERID || REC.DNAME ||REC.DPERCENT);
END LOOP;
N5:=&OFFER_ID;
TOT:=DISCNT(N4,N5,P);
CIDD:=&CIDD;
CNAMEE:=&CNAMEE;
EMAILL:=&EMAILL;
PHONEE:=&PHONEE;
DETAILS(CIDD,CNAMEE,EMAILL,PHONEE);
TICDETAIL(CIDD,N1,S,N4,TOT);
END;
/
